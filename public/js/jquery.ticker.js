/* jQuery News Ticker is free software: you can redistribute it and/or modify it under the terms of the GNU General Public License as published by the Free Software Foundation, version 2 of the License */
(function(e){e.fn.ticker=function(t){var n=e.extend({},e.fn.ticker.defaults,t);if(e(this).length==0){if(window.console&&window.console.log){}else{}return false}var r="#"+e(this).attr("id");var i=e(this).get(0).tagName;return this.each(function(){function o(e){var t=0,n;for(n in e){if(e.hasOwnProperty(n))t++}return t}function u(){var e=new Date;return e.getTime()}function a(e){if(n.debugMode){if(window.console&&window.console.log){window.console.log(e)}else{alert(e)}}}function f(){l();e(r).wrap('<div id="'+s.dom.wrapperID.replace("#","")+'"></div>');e(s.dom.wrapperID).children().remove();e(s.dom.wrapperID).append('<div id="'+s.dom.tickerID.replace("#","")+'" class="ticker"><div id="'+s.dom.titleID.replace("#","")+'" class="ticker-title"><span><!-- --></span></div><p id="'+s.dom.contentID.replace("#","")+'" class="ticker-content"></p><div id="'+s.dom.revealID.replace("#","")+'" class="ticker-swipe"><span><!-- --></span></div></div>');e(s.dom.wrapperID).removeClass("no-js").addClass("ticker-wrapper has-js "+n.direction);e(s.dom.tickerElem+","+s.dom.contentID).hide();if(n.controls){e(s.dom.controlsID).on("click mouseover mousedown mouseout mouseup",function(t){var n=t.target.id;if(t.type=="click"){switch(n){case s.dom.prevID.replace("#",""):s.paused=true;e(s.dom.playPauseID).addClass("paused");m("prev");break;case s.dom.nextID.replace("#",""):s.paused=true;e(s.dom.playPauseID).addClass("paused");m("next");break;case s.dom.playPauseID.replace("#",""):if(s.play==true){s.paused=true;e(s.dom.playPauseID).addClass("paused");d()}else{s.paused=false;e(s.dom.playPauseID).removeClass("paused");v()}break}}else if(t.type=="mouseover"&&e("#"+n).hasClass("controls")){e("#"+n).addClass("over")}else if(t.type=="mousedown"&&e("#"+n).hasClass("controls")){e("#"+n).addClass("down")}else if(t.type=="mouseup"&&e("#"+n).hasClass("controls")){e("#"+n).removeClass("down")}else if(t.type=="mouseout"&&e("#"+n).hasClass("controls")){e("#"+n).removeClass("over")}});e(s.dom.wrapperID).append('<ul id="'+s.dom.controlsID.replace("#","")+'" class="ticker-controls"><li id="'+s.dom.playPauseID.replace("#","")+'" class="jnt-play-pause controls"><a href=""><!-- --></a></li><li id="'+s.dom.prevID.replace("#","")+'" class="jnt-prev controls"><a href=""><!-- --></a></li><li id="'+s.dom.nextID.replace("#","")+'" class="jnt-next controls"><a href=""><!-- --></a></li></ul>')}if(n.displayType!="fade"){e(s.dom.contentID).mouseover(function(){if(s.paused==false){d()}}).mouseout(function(){if(s.paused==false){v()}})}if(!n.ajaxFeed){c()}}function l(){if(s.contentLoaded==false){if(n.ajaxFeed){if(n.feedType=="xml"){e.ajax({url:n.feedUrl,cache:false,dataType:n.feedType,async:true,success:function(e){count=0;for(var t=0;t<e.childNodes.length;t++){if(e.childNodes[t].nodeName=="rss"){xmlContent=e.childNodes[t]}}for(var r=0;r<xmlContent.childNodes.length;r++){if(xmlContent.childNodes[r].nodeName=="channel"){xmlChannel=xmlContent.childNodes[r]}}for(var i=0;i<xmlChannel.childNodes.length;i++){if(xmlChannel.childNodes[i].nodeName=="item"){xmlItems=xmlChannel.childNodes[i];var u,f=false;for(var l=0;l<xmlItems.childNodes.length;l++){if(xmlItems.childNodes[l].nodeName=="title"){u=xmlItems.childNodes[l].lastChild.nodeValue}else if(xmlItems.childNodes[l].nodeName=="link"){f=xmlItems.childNodes[l].lastChild.nodeValue}if(u!==false&&u!=""&&f!==false){s.newsArr["item-"+count]={type:n.titleText,content:'<a href="'+f+'">'+u+"</a>"};count++;u=false;f=false}}}}if(o(s.newsArr<1)){a("Couldn't find any content from the XML feed for the ticker to use!");return false}s.contentLoaded=true;c()}})}else{a("Code Me!")}}else if(n.htmlFeed){if(e(r+" LI").length>0){e(r+" LI").each(function(t){s.newsArr["item-"+t]={type:n.titleText,content:e(this).html()}})}else{a("Couldn't find HTML any content for the ticker to use!");return false}}else{a("The ticker is set to not use any types of content! Check the settings for the ticker.");return false}}}function c(){s.contentLoaded=true;e(s.dom.titleElem).html(s.newsArr["item-"+s.position].type);e(s.dom.contentID).html(s.newsArr["item-"+s.position].content);if(s.position==o(s.newsArr)-1){s.position=0}else{s.position++}distance=e(s.dom.contentID).width();time=distance/n.speed;h()}function h(){e(s.dom.contentID).css("opacity","1");if(s.play){var t=e(s.dom.titleID).width()+20;e(s.dom.revealID).css(n.direction,t+"px");if(n.displayType=="fade"){e(s.dom.revealID).hide(0,function(){e(s.dom.contentID).css(n.direction,t+"px").fadeIn(n.fadeInSpeed,p)})}else if(n.displayType=="scroll"){}else{e(s.dom.revealElem).show(0,function(){e(s.dom.contentID).css(n.direction,t+"px").show();animationAction=n.direction=="right"?{marginRight:distance+"px"}:{marginLeft:distance+"px"};e(s.dom.revealID).css("margin-"+n.direction,"0px").delay(20).animate(animationAction,time,"linear",p)})}}else{return false}}function p(){if(s.play){e(s.dom.contentID).delay(n.pauseOnItems).fadeOut(n.fadeOutSpeed);if(n.displayType=="fade"){e(s.dom.contentID).fadeOut(n.fadeOutSpeed,function(){e(s.dom.wrapperID).find(s.dom.revealElem+","+s.dom.contentID).hide().end().find(s.dom.tickerID+","+s.dom.revealID).show().end().find(s.dom.tickerID+","+s.dom.revealID).removeAttr("style");c()})}else{e(s.dom.revealID).hide(0,function(){e(s.dom.contentID).fadeOut(n.fadeOutSpeed,function(){e(s.dom.wrapperID).find(s.dom.revealElem+","+s.dom.contentID).hide().end().find(s.dom.tickerID+","+s.dom.revealID).show().end().find(s.dom.tickerID+","+s.dom.revealID).removeAttr("style");c()})})}}else{e(s.dom.revealElem).hide()}}function d(){s.play=false;e(s.dom.tickerID+","+s.dom.revealID+","+s.dom.titleID+","+s.dom.titleElem+","+s.dom.revealElem+","+s.dom.contentID).stop(true,true);e(s.dom.revealID+","+s.dom.revealElem).hide();e(s.dom.wrapperID).find(s.dom.titleID+","+s.dom.titleElem).show().end().find(s.dom.contentID).show()}function v(){s.play=true;s.paused=false;p()}function m(t){d();switch(t){case"prev":if(s.position==0){s.position=o(s.newsArr)-2}else if(s.position==1){s.position=o(s.newsArr)-1}else{s.position=s.position-2}e(s.dom.titleElem).html(s.newsArr["item-"+s.position].type);e(s.dom.contentID).html(s.newsArr["item-"+s.position].content);break;case"next":e(s.dom.titleElem).html(s.newsArr["item-"+s.position].type);e(s.dom.contentID).html(s.newsArr["item-"+s.position].content);break}if(s.position==o(s.newsArr)-1){s.position=0}else{s.position++}}var t=u();var s={position:0,time:0,distance:0,newsArr:{},play:true,paused:false,contentLoaded:false,dom:{contentID:"#ticker-content-"+t,titleID:"#ticker-title-"+t,titleElem:"#ticker-title-"+t+" SPAN",tickerID:"#ticker-"+t,wrapperID:"#ticker-wrapper-"+t,revealID:"#ticker-swipe-"+t,revealElem:"#ticker-swipe-"+t+" SPAN",controlsID:"#ticker-controls-"+t,prevID:"#prev-"+t,nextID:"#next-"+t,playPauseID:"#play-pause-"+t}};if(i!="UL"&&i!="OL"&&n.htmlFeed===true){a("Cannot use <"+i.toLowerCase()+"> type of element for this plugin - must of type <ul> or <ol>");return false}n.direction=="rtl"?n.direction="right":n.direction="left";f();})};e.fn.ticker.defaults={speed:.1,ajaxFeed:false,feedUrl:"",feedType:"xml",displayType:"reveal",htmlFeed:true,debugMode:true,controls:true,titleText:"Latest",direction:"ltr",pauseOnItems:3e3,fadeInSpeed:600,fadeOutSpeed:300}})(jQuery);